diff a/game/src/scenes/PlanningScene.js b/game/src/scenes/PlanningScene.js	(rejected hunks)
@@ -1309,20 +1298,20 @@ export class PlanningScene extends Phaser.Scene {
       .setDepth(2000);
 
     this.headerMetaText = this.add
-      .text(l.boardPanelX + l.boardPanelW - UI_SPACING.SM - 120, l.topPanelY + UI_SPACING.SM + 6, "", {
+      .text(l.boardPanelX + UI_SPACING.SM, l.topPanelY + UI_SPACING.SM + 42, "", {
         fontFamily: UI_FONT,
         fontSize: "13px",
-        color: UI_COLORS.textSecondary,
-        align: "right"
+        color: UI_COLORS.textMuted,
+        align: "left"
       })
-      .setOrigin(1, 0)
+      .setOrigin(0, 0)
       .setDepth(2000);
 
     // Stat Chips
     const statDefs = [
       { key: "round", icon: "≡ƒº¡", label: "V├▓ng" },
       { key: "gold", icon: "≡ƒ¬Ö", label: "V├áng", hasBar: true, barColor: 0xd4a017 },
-      { key: "level", icon: "Γ¼å", label: "Cß║Ñp" },
+      { key: "level", icon: "Γ¼å", label: "Cß║Ñp", hasBar: true, barColor: 0x9c27b0 },
       { key: "xp", icon: "Γ£ª", label: "XP", hasBar: true, barColor: 0x3a8fd4 },
       { key: "deploy", icon: "ΓÜö", label: "Triß╗ân khai", hasBar: true, barColor: 0x4caf50 }
     ];
@@ -1413,14 +1402,49 @@ export class PlanningScene extends Phaser.Scene {
     this.synergyText.setInteractive({ useHandCursor: true });
     this.tooltip.attach(this.synergyText, () => this.getSynergyTooltip());
 
+    this.createStorageSpace();
+  }
+
+  createStorageSpace() {
+    const l = this.layout;
+
+    // Cleanup old UI elements if they exist
+    if (this.storageTitleText) this.storageTitleText.destroy();
+    if (this.storageSummaryText) this.storageSummaryText.destroy();
+    if (this.inventoryCells) {
+      this.inventoryCells.forEach(cell => {
+        cell.bg.destroy();
+        cell.icon.destroy();
+        cell.count.destroy();
+      });
+    }
+
+    if (this.craftTitleText) this.craftTitleText.destroy();
+    if (this.craftHintText) this.craftHintText.destroy();
+    if (this.craftInputSlots) {
+      this.craftInputSlots.forEach(slot => {
+        slot.bg.destroy();
+        slot.icon.destroy();
+      });
+    }
+    if (this.craftOutputSlot) {
+      this.craftOutputSlot.bg.destroy();
+      this.craftOutputSlot.icon.destroy();
+    }
+    if (this.logHistoryIcon) this.logHistoryIcon.destroy();
+    if (this.logText) this.logText.destroy();
+    if (this.storageCraftText) this.storageCraftText.destroy();
 
     // Inventory - Above Bench (left)
-    const invX = l.benchSlotsRegionX ?? l.benchRegionX;
-    const invY = l.invY;
-    const invCell = l.invCellSize;
     const invGap = UI_SPACING.XS;
-    const invAreaW = l.benchSlotsRegionW ?? l.benchRegionW;
-    const invCols = clamp(Math.floor((invAreaW + invGap) / (invCell + invGap)), 4, 10);
+    // If upgraded, show 16 slots (2 rows of 8)
+    const isUpgraded = (this.player?.inventoryUpgradeLevel ?? 0) > 0;
+    const invCols = 8;
+    const invRows = isUpgraded ? 2 : 1;
+    // Move inventory closer to bench/craft
+    const invX = (l.benchSlotsRegionX ?? l.benchRegionX);
+    const invCell = l.invCellSize;
+    const invY = l.invY;
 
     this.storageTitleText = this.add.text(invX, invY - 20, "Γùå KHO ─Éß╗Æ", {
       fontFamily: UI_FONT,
@@ -1436,51 +1460,53 @@ export class PlanningScene extends Phaser.Scene {
     }).setDepth(2000);
 
     this.inventoryCells = [];
-    for (let i = 0; i < invCols; i += 1) {
-      const x = invX + i * (invCell + invGap);
-      const yy = invY;
-      const bg = this.add.rectangle(x + invCell / 2, yy + invCell / 2, invCell, invCell, 0x162639, 0.95);
-      bg.setStrokeStyle(1, UI_COLORS.panelEdgeSoft, 0.78);
-      bg.setDepth(2000);
-      bg.setInteractive({ useHandCursor: true });
-      const icon = this.add.text(x + 6, yy + 4, "+", {
-        fontFamily: "Segoe UI Emoji",
-        fontSize: "18px",
-        color: UI_COLORS.textMuted
-      }).setDepth(2001);
-      const count = this.add.text(x + invCell - 4, yy + invCell - 4, "", {
-        fontFamily: UI_FONT,
-        fontSize: "9px",
-        color: UI_COLORS.textSecondary
-      }).setOrigin(1, 1).setDepth(2001);
-
-      const cell = { bg, icon, count, itemId: null, amount: 0 };
-      bg.on("pointerdown", () => this.onInventoryCellClick(cell));
-      this.tooltip.attach(bg, () => {
-        if (!cell.itemId) return { title: "├ö vß║¡t phß║⌐m", body: "Trß╗æng." };
-        const item = ITEM_BY_ID[cell.itemId];
-        const itemType = item?.kind === "equipment" ? "Trang bß╗ï" : "Nguy├¬n liß╗çu";
-        let extra = "";
-        if (item?.kind === "equipment") {
-          const recipe = RECIPE_BY_ID[item.fromRecipe];
-          if (recipe?.description) extra = `\n\nΓùå Hiß╗çu ß╗⌐ng: ${recipe.description}`;
-          extra += "\nΓùå Nhß║Ñn v├áo th├║ ─æß╗â trang bß╗ï.";
-          extra += "\nΓùå Nhß║Ñn lß║íi lß║ºn 2 ─æß╗â ─æ╞░a v├áo b├án chß║┐ tß║ío.";
-        } else {
-          extra = "\nΓùå D├╣ng ─æß╗â gh├⌐p ─æß╗ô.";
-        }
-        return {
-          title: `${item?.icon ?? "Γ¥ö"} ${item?.name ?? cell.itemId}`,
-          body: `Loß║íi: ${itemType}\nSß╗æ l╞░ß╗úng: ${cell.amount}${extra}`
-        };
-      });
-      this.inventoryCells.push(cell);
+    for (let row = 0; row < invRows; row += 1) {
+      for (let col = 0; col < invCols; col += 1) {
+        const x = invX + col * (invCell + invGap);
+        const yy = invY + row * (invCell + invGap);
+        const bg = this.add.rectangle(x + invCell / 2, yy + invCell / 2, invCell, invCell, 0x162639, 0.95);
+        bg.setStrokeStyle(1, UI_COLORS.panelEdgeSoft, 0.78);
+        bg.setDepth(2000);
+        bg.setInteractive({ useHandCursor: true });
+        const icon = this.add.text(x + 6, yy + 4, "+", {
+          fontFamily: "Segoe UI Emoji",
+          fontSize: "18px",
+          color: UI_COLORS.textMuted
+        }).setDepth(2001);
+        const count = this.add.text(x + invCell - 4, yy + invCell - 4, "", {
+          fontFamily: UI_FONT,
+          fontSize: "9px",
+          color: UI_COLORS.textSecondary
+        }).setOrigin(1, 1).setDepth(2001);
+
+        const cell = { bg, icon, count, itemId: null, amount: 0 };
+        bg.on("pointerdown", () => this.onInventoryCellClick(cell));
+        this.tooltip.attach(bg, () => {
+          if (!cell.itemId) return { title: "├ö vß║¡t phß║⌐m", body: "Trß╗æng." };
+          const item = ITEM_BY_ID[cell.itemId];
+          const itemType = item?.kind === "equipment" ? "Trang bß╗ï" : "Nguy├¬n liß╗çu";
+          let extra = "";
+          if (item?.kind === "equipment") {
+            const recipe = RECIPE_BY_ID[item.fromRecipe];
+            if (recipe?.description) extra = "\n\nΓùå Hiß╗çu ß╗⌐ng: ";
+            extra += "\nΓùå Nhß║Ñn v├áo th├║ ─æß╗â trang bß╗ï.";
+            extra += "\nΓùå Nhß║Ñn lß║íi lß║ºn 2 ─æß╗â ─æ╞░a v├áo b├án chß║┐ tß║ío.";
+          } else {
+            extra = "\nΓùå D├╣ng ─æß╗â gh├⌐p ─æß╗ô.";
+          }
+          return {
+            title: `${item?.icon ?? "Γ¥ö"} ${item?.name ?? cell.itemId}`,
+            body: `Loß║íi: ${itemType}\nSß╗æ l╞░ß╗úng: ${cell.amount}${extra}`
+          };
+        });
+        this.inventoryCells.push(cell);
+      }
     }
 
     // Craft panel - Right side of bench
-    const craftX = l.craftRegionX ?? (l.benchRegionX + l.benchRegionW - 170);
+    const craftX = l.craftRegionX + 40; // Shift craft panel to the right towards bench
     const craftY = l.benchY + 2;
-    const craftW = l.craftRegionW ?? 170;
+    const craftW = l.craftRegionW;
     const craftCellGap = 5;
     const craftCell = clamp(Math.floor((craftW - 30) / 5), 26, 32);
     const craftGridW = craftCell * 3 + craftCellGap * 2;
@@ -1532,7 +1558,6 @@ export class PlanningScene extends Phaser.Scene {
       });
       this.craftInputSlots.push(slot);
     }
-
     const arrowX = gridX0 + craftGridW + Math.floor(craftArrowGap * 0.5);
     const arrowY = gridY0 + Math.floor(craftGridH * 0.5);
     this.add.text(arrowX, arrowY, "ΓåÆ", {
@@ -1556,7 +1581,7 @@ export class PlanningScene extends Phaser.Scene {
     this.tooltip.attach(outBg, () => {
       const recipeId = this.getCraftResultRecipeId();
       const size = this.getCraftGridSize();
-      if (!recipeId) return { title: "─Éß║ºu ra", body: `Ch╞░a c├│ c├┤ng thß╗⌐c khß╗¢p. Sß║»p vß║¡t phß║⌐m theo mß║½u ${size}x${size}.` };
+      if (!recipeId) return { title: "─Éß║ºu ra", body: "Ch╞░a c├│ c├┤ng thß╗⌐c khß╗¢p. Sß║»p vß║¡t phß║⌐m theo mß║½u x." };
       const recipe = RECIPE_BY_ID[recipeId];
       return {
         title: `${recipe?.icon ?? "Γ£¿"} ${recipe?.name ?? recipeId}`,
@@ -1605,46 +1630,62 @@ export class PlanningScene extends Phaser.Scene {
 
     // Only show shop buttons if shop is enabled in game mode
     if (this.gameModeConfig?.enabledSystems?.shop !== false) {
-      this.buttons.roll = this.createButton(curX, y1, 130, btnH, "─Éß╗òi t╞░ß╗¢ng (2 v├áng)", () => this.rollShop());
-      curX += 130 + gap;
-
-      this.buttons.xp = this.createButton(curX, y1, 130, btnH, "Mua XP (4 v├áng)", () => this.buyXp());
+      this.buttons.roll = this.createButton(curX, y1, 130, btnH, "─Éß╗òi t╞░ß╗¢ng (2≡ƒ¬Ö)", () => this.rollShop());
       curX += 130 + gap;
 
       this.buttons.lock = this.createButton(curX, y1, 100, btnH, "Kh├│a: Tß║»t", () => this.toggleLock());
       curX += 100 + gap;
     }
 
-    this.buttons.upgradeBench = this.createButton(curX, y1, 160, btnH, "N├óng dß╗▒ bß╗ï (10 v├áng)", () => this.upgradeBench());
-    curX += 160 + gap;
+    this.buttons.sell = this.createButton(curX, y1, 85, btnH, "B├ín (S)", () => this.sellSelectedUnit(), { variant: "ghost" });
+    curX += 85 + gap;
+
+    // ΓöÇΓöÇ Group 2: Action buttons LEFT of Start CTA ΓöÇΓöÇ
+    const startX = l.boardPanelX + l.boardPanelW - ctaW;
+    let actionX = startX;
 
     // Only show craft button if crafting is enabled in game mode
     if (this.gameModeConfig?.enabledSystems?.crafting !== false) {
-      this.buttons.upgradeCraft = this.createButton(curX, y1, 160, btnH, "N├óng b├án chß║┐ (15 v├áng)", () => this.upgradeCraftTable());
-      curX += 160 + gap;
+      actionX -= 145 + gap;
+      this.buttons.upgradeCraft = this.createButton(actionX, y1, 145, btnH, "N├óng b├án chß║┐ (15≡ƒ¬Ö)", () => this.upgradeCraftTable());
     }
 
-    this.buttons.sell = this.createButton(curX, y1, 85, btnH, "B├ín (S)", () => this.sellSelectedUnit(), { variant: "ghost" });
-    curX += 85 + gap;
+    if (this.gameModeConfig?.enabledSystems?.shop !== false) {
+      actionX -= 120 + gap;
+      this.buttons.xp = this.createButton(actionX, y1, 120, btnH, "Mua XP (4≡ƒ¬Ö)", () => this.buyXp());
+    }
+
+    actionX -= 140 + gap;
+    this.buttons.upgradeBench = this.createButton(actionX, y1, 140, btnH, "N├óng dß╗▒ bß╗ï (10≡ƒ¬Ö)", () => this.upgradeBench());
 
-    this.buttons.reset = this.createButton(curX, y1, 85, btnH, "V├ín mß╗¢i", () => this.startNewRun(), { variant: "ghost" });
+    actionX -= 140 + gap;
+    this.buttons.upgradeInventory = this.createButton(actionX, y1, 140, btnH, "N├óng kho ─æß╗ô (5≡ƒ¬Ö)", () => this.upgradeInventory());
 
+    // ΓöÇΓöÇ Start CTA ΓöÇΓöÇ
     this.buttons.start = this.createButton(
-      l.boardPanelX + l.boardPanelW - ctaW,
+      startX,
       y1 - 2,
       ctaW,
       48,
-      "XUß║ñT TRß║¼N",
+      "Bß║«T ─Éß║ªU GIAO TRANH",
       () => this.beginCombat(),
       { variant: "cta", fontSize: 16, bold: true }
     );
     this.buttons.start.bg.setStrokeStyle(1.4, UI_COLORS.ctaEdge, 0.98);
 
-    // C├ái ─æß║╖t moved to top right
+    // ΓöÇΓöÇ Settings button (top-right) ΓöÇΓöÇ
+    const topBtnWidths = {
+      settings: 104,
+      wiki: 114,
+      history: 104,
+      reset: 96
+    };
+
+    let topBtnX = l.boardPanelX + l.boardPanelW - topBtnWidths.settings - 12; // 12px right padding
     this.buttons.settings = this.createButton(
-      l.boardPanelX + l.boardPanelW - 118,
+      topBtnX,
       l.topPanelY + 14,
-      104,
+      topBtnWidths.settings,
       32,
       "ΓÜÖ C├ái ─æß║╖t",
       () => this.toggleSettingsOverlay(),
@@ -1653,33 +1694,47 @@ export class PlanningScene extends Phaser.Scene {
 
     this.buttons.versionInfo = null;
 
-    this.buttons.history = this.createButton(
-      l.boardPanelX + l.boardPanelW - ctaW - 194,
-      y1 + 8,
-      86,
-      34,
-      "≡ƒô£ Lß╗ïch sß╗¡",
-      () => this.toggleHistoryModal(true),
-      { variant: "ghost", fontSize: 13 }
-    );
-
+    // ΓöÇΓöÇ Group 1: Utility buttons LEFT of Settings (top-right) ΓöÇΓöÇ
+    topBtnX -= (topBtnWidths.wiki + gap);
     this.buttons.wiki = this.createButton(
-      l.boardPanelX + l.boardPanelW - ctaW - 102,
-      y1 + 8,
-      96,
-      34,
-      "Th╞░ Viß╗çn",
+      topBtnX,
+      l.topPanelY + 14,
+      topBtnWidths.wiki,
+      32,
+      "≡ƒôÜ Th╞░ Viß╗çn",
       () => {
         this.toggleSettingsOverlay(false);
         this.toggleHistoryModal(false);
         this.toggleVersionInfoModal(false);
         this.libraryModal.toggle();
       },
-      { variant: "ghost", fontSize: 13 }
+      { variant: "ghost", fontSize: 12 }
+    );
+
+    topBtnX -= (topBtnWidths.history + gap);
+    this.buttons.history = this.createButton(
+      topBtnX,
+      l.topPanelY + 14,
+      topBtnWidths.history,
+      32,
+      "≡ƒô£ Nhß║¡t k├╜",
+      () => this.toggleHistoryModal(true),
+      { variant: "ghost", fontSize: 12 }
+    );
+
+    topBtnX -= (topBtnWidths.reset + gap);
+    this.buttons.reset = this.createButton(
+      topBtnX,
+      l.topPanelY + 14,
+      topBtnWidths.reset,
+      32,
+      "≡ƒöä V├ín mß╗¢i",
+      () => this.startNewRun(),
+      { variant: "ghost", fontSize: 12 }
     );
 
     const controlsX = l.boardPanelX + l.boardPanelW - 14;
-    const controlsY = l.topPanelY + 54;
+    const controlsY = l.topPanelY + 64;
     this.controlsText = this.add.text(
       controlsX,
       controlsY,
@@ -2994,15 +3072,19 @@ export class PlanningScene extends Phaser.Scene {
         const unit = BoardSystem.getUnitAt(this.player.board, row, col);
         if (!unit || unit.uid !== uid) continue;
 
-        // Use ShopSystem to sell unit
+        const equips = [...(unit.equips || [])];
         const result = ShopSystem.sellUnit(this.player, unit);
 
         if (result.success) {
           this.player = result.player;
-          // Use BoardSystem to remove unit from board
+          // Return equips to itemBag
+          if (equips.length > 0) {
+            this.player.itemBag = [...(this.player.itemBag || []), ...equips];
+          }
           BoardSystem.removeUnit(this.player.board, row, col);
           this.selectedBenchIndex = null;
           this.addLog(`B├ín ${unit.base.name} (${unit.star}Γÿà) +${result.sellValue} v├áng.`);
+          if (equips.length > 0) this.addLog(`─É├ú ho├án trß║ú ${equips.length} trang bß╗ï.`);
           this.refreshPlanningUi();
           this.persistProgress();
           return true;
@@ -3023,15 +3105,20 @@ export class PlanningScene extends Phaser.Scene {
     const unit = this.player?.bench?.[index];
     if (!unit) return false;
 
-    // Use ShopSystem to sell unit
+    const equips = [...(unit.equips || [])];
     const result = ShopSystem.sellUnit(this.player, unit);
 
     if (result.success) {
       this.player = result.player;
+      // Return equips to itemBag
+      if (equips.length > 0) {
+        this.player.itemBag = [...(this.player.itemBag || []), ...equips];
+      }
       this.player.bench.splice(index, 1);
       if (this.selectedBenchIndex === index) this.selectedBenchIndex = null;
       if (this.selectedBenchIndex != null && this.selectedBenchIndex > index) this.selectedBenchIndex -= 1;
       this.addLog(`B├ín ${unit.base.name} (${unit.star}Γÿà) +${result.sellValue} v├áng.`);
+      if (equips.length > 0) this.addLog(`─É├ú ho├án trß║ú ${equips.length} trang bß╗ï.`);
       this.refreshPlanningUi();
       this.persistProgress();
       return true;
@@ -4276,12 +4363,12 @@ export class PlanningScene extends Phaser.Scene {
     container.setDepth(5000);
 
     const options = [];
-    if (MATCH_WIKI_ENABLED) {
+    if (this.libraryModal) {
       options.push({
         label: "Chi tiß║┐t",
         action: () => {
-          this._wikiDetailUnit = unit.baseId;
-          this.toggleWikiModal(true);
+          this.libraryModal.setDetailUnit(unit.baseId);
+          this.libraryModal.show();
         }
       });
     }
@@ -4423,20 +4510,27 @@ export class PlanningScene extends Phaser.Scene {
     const loseCondition = this.getLoseCondition();
     const loseLabel = loseCondition === "NO_HEARTS" ? `${getLoseConditionLabel(loseCondition)} (${this.player.hp} tim)` : getLoseConditionLabel(loseCondition);
     this.setHeaderStatValue("round", `${this.player.round}`);
-    this.setHeaderStatValue("gold", this.player.gold, 50);
-    this.setHeaderStatValue("level", `${this.player.level}`);
-    this.setHeaderStatValue("xp", xpText, xpNeed === Number.POSITIVE_INFINITY ? null : xpNeed);
-    this.setHeaderStatValue("deploy", deployText, this.getDeployCap());
+    this.setHeaderStatValue("gold", this.player.gold, 50, this.player.gold);
+    this.setHeaderStatValue("level", `${this.player.level}`, 12, this.player.level);
+    this.setHeaderStatValue("xp", xpText, xpNeed === Number.POSITIVE_INFINITY ? null : xpNeed, this.player.xp);
+    this.setHeaderStatValue("deploy", deployText, this.getDeployCap(), this.getDeployCount());
     this.headerMetaText?.setText(`Pha ${this.getPhaseLabel(this.phase)} ΓÇó AI ${AI_SETTINGS[this.aiMode].label} ΓÇó ${modeLabel} ΓÇó ${loseLabel}`);
     this.updateLogText();
   }
 
-  setHeaderStatValue(key, value, max = null) {
+  setHeaderStatValue(key, value, max = null, currentIndicator = null) {
     const chip = this.headerStatChips?.[key];
     if (!chip?.value) return;
     chip.value.setText(String(value ?? "-"));
     if (chip.bar && max != null && max > 0) {
-      const pct = Math.min(1, Math.max(0, (value ?? 0) / max));
+      // Use currentIndicator if provided, otherwise fallback to parsing value (historical behavior)
+      let cur = currentIndicator;
+      if (cur == null) {
+        const parsed = parseFloat(String(value));
+        cur = !Number.isNaN(parsed) ? parsed : 0;
+      }
+
+      const pct = Math.min(1, Math.max(0, cur / max));
       const barMaxW = chip.chipW - 4;
       const barW = Math.max(2, Math.floor(barMaxW * pct));
       chip.bar.clear();
@@ -4460,16 +4554,16 @@ export class PlanningScene extends Phaser.Scene {
     const lock = this.player.shopLocked ? "Bß║¡t" : "Tß║»t";
     const rollCost = Math.max(1, 2 + this.player.rollCostDelta);
 
-    this.buttons.roll?.setLabel(`─Éß╗òi t╞░ß╗¢ng (${rollCost} v├áng)`);
-    this.buttons.xp?.setLabel("Mua XP (4 v├áng)");
+    this.buttons.roll?.setLabel(`─Éß╗òi t╞░ß╗¢ng (${rollCost}≡ƒ¬Ö)`);
+    this.buttons.xp?.setLabel("Mua XP (4≡ƒ¬Ö)");
     this.buttons.lock?.setLabel(`Kh├│a: ${lock}`);
     const craftLevel = this.player?.craftTableLevel ?? 0;
-    this.buttons.upgradeBench?.setLabel(`N├óng dß╗▒ bß╗ï (10 v├áng)`);
-    this.buttons.upgradeCraft?.setLabel(craftLevel >= 1 ? "B├án chß║┐: 3x3" : "N├óng b├án chß║┐ (15 v├áng)");
+    this.buttons.upgradeBench?.setLabel(`N├óng dß╗▒ bß╗ï (10≡ƒ¬Ö)`);
+    this.buttons.upgradeCraft?.setLabel(craftLevel >= 1 ? "B├án chß║┐: 3x3" : "N├óng b├án chß║┐ (15≡ƒ¬Ö)");
     this.buttons.sell.setLabel(this.selectedBenchIndex != null ? "B├ín ─æ├ú chß╗ìn" : "B├ín (S)");
     this.buttons.start.setLabel("Bß║«T ─Éß║ªU GIAO TRANH");
     this.buttons.settings.setLabel("C├ái ─æß║╖t");
-    this.buttons.history?.setLabel(`Xem lß╗ïch sß╗¡ (${this.logHistory.length})`);
+    this.buttons.history?.setLabel(`≡ƒô£ Nhß║¡t k├╜ (${this.logHistory.length})`);
 
     this.buttons.roll?.setEnabled(planning);
     this.buttons.xp?.setEnabled(planning);
@@ -5086,7 +5180,7 @@ export class PlanningScene extends Phaser.Scene {
   updateLogText() {
     const latest = this.logs.length ? this.logs[this.logs.length - 1] : null;
     this.logText.setText(latest ? `ΓÇó ${latest}` : "ΓÇó Ch╞░a c├│ sß╗▒ kiß╗çn.");
-    this.buttons.history?.setLabel(`Xem lß╗ïch sß╗¡ (${this.logHistory.length})`);
+    this.buttons.history?.setLabel(`≡ƒô£ Nhß║¡t k├╜ (${this.logHistory.length})`);
     this.refreshRightPanelScrollMetrics();
   }
 
@@ -5111,31 +5205,41 @@ export class PlanningScene extends Phaser.Scene {
     else if (skill?.damageType === "true") skillIcon = "≡ƒÆá";
 
     const rightLines = [
-      "≡ƒæè ─É├ính th╞░ß╗¥ng",
-      ...this.describeBasicAttack(base.classType, base.stats.range).map((line) => `ΓÇó ${line}`),
-      "",
       `${skillIcon} Chi├¬u thß╗⌐c: ${skill?.name ?? "Kh├┤ng c├│"}`,
-      ...this.describeSkillLines(skill, base).map((line) => `ΓÇó ${line}`)
+      ""
     ];
 
-    if (equippedItems.length) {
-      rightLines.push("");
-      rightLines.push("≡ƒôª Trang bß╗ï ─æang mß║╖c");
-      equippedItems.forEach((item) => {
-        const recipe = RECIPE_BY_ID[item.fromRecipe];
-        const desc = recipe?.description ? ` (${recipe.description})` : "";
-        rightLines.push(`ΓÇó ${item.icon} ${item.name}${desc}`);
-      });
-    }
+    // Use element-aware skill description for right column
+    const skillDescLines = _describeSkillWithElement(skill, base.tribe, base);
+    skillDescLines.forEach((line) => rightLines.push(line));
 
     if (variant) {
       rightLines.push("");
       rightLines.push(`Γùå Biß║┐n thß╗â: ${variant.name}`);
     }
 
-    const equipmentLine = equippedItems.length
-      ? `Trang bß╗ï: ${equippedItems.map((item) => `${item.icon} ${item.name}`).join(", ")}`
-      : "Trang bß╗ï: Ch╞░a c├│";
+    // --- 3rd column: equipment ---
+    const equipCount = equippedItems.length;
+    const col3Lines = [
+      `≡ƒôª Trang bß╗ï (${equipCount}/3)`,
+      ""
+    ];
+
+    if (equipCount > 0) {
+      equippedItems.forEach((item) => {
+        const recipe = RECIPE_BY_ID[item.fromRecipe];
+        col3Lines.push(`${item.icon} ${item.name}`);
+        if (recipe?.description) {
+          col3Lines.push(`  ${recipe.description}`);
+        }
+        col3Lines.push("");
+      });
+    } else {
+      col3Lines.push("Ch╞░a c├│ trang bß╗ï.");
+      col3Lines.push("");
+      col3Lines.push("Gh├⌐p ─æß╗ô ß╗ƒ b├án chß║┐,");
+      col3Lines.push("rß╗ôi k├⌐o v├áo th├║ ─æß╗â mß║╖c.");
+    }
 
     // Calculate evasion stat
     const baseEvasion = getBaseEvasion(base.classType);
@@ -5149,19 +5253,28 @@ export class PlanningScene extends Phaser.Scene {
       }
     }
 
+    // Element label
+    const elementLabel = getElementLabel(base.tribe);
+
+    // Basic attack goes in left body
+    const basicAtkLines = this.describeBasicAttack(base.classType, base.stats.range);
+
     return {
       title: `${visual.icon} ${visual.nameVi} (${star}Γÿà)`,
       body: [
-        `≡ƒÅ╖∩╕Å Bß║¡c:${base.tier}  ${getTribeLabelVi(base.tribe)}/${getClassLabelVi(base.classType)}`,
+        `≡ƒÅ╖∩╕Å Bß║¡c:${base.tier}  ${elementLabel ? elementLabel + " " : ""}${getTribeLabelVi(base.tribe)}/${getClassLabelVi(base.classType)}`,
         `Γ¥ñ∩╕Å HP:${Math.round(base.stats.hp * statScale)}  ATK:${Math.round(base.stats.atk * statScale)}  DEF:${Math.round(base.stats.def * statScale)}`,
         `Γ£¿ MATK:${Math.round(base.stats.matk * statScale)}  MDEF:${Math.round(base.stats.mdef * statScale)}  Tß║ºm:${base.stats.range >= 2 ? "─É├ính xa" : "Cß║¡n chiß║┐n"}`,
         evasionText,
         `≡ƒöÑ Nß╗Ö tß╗æi ─æa:${base.stats.rageMax}`,
-        `≡ƒÄÆ ${equipmentLine}`,
         `≡ƒÄ» Mß╗æc nghß╗ü: ${classMarks}`,
-        `≡ƒî┐ Mß╗æc tß╗Öc: ${tribeMarks}`
+        `≡ƒî┐ Mß╗æc tß╗Öc: ${tribeMarks}`,
+        "",
+        "≡ƒæè ─É├ính th╞░ß╗¥ng",
+        ...basicAtkLines.map((l) => `  ΓÇó ${l}`)
       ].join("\n"),
-      rightBody: rightLines.join("\n")
+      rightBody: rightLines.join("\n"),
+      col3Body: ownedUnit ? col3Lines.join("\n") : ""
     };
   }
 
@@ -5232,336 +5345,51 @@ export class PlanningScene extends Phaser.Scene {
     return SynergySystem.formatBonusSet(bonus);
   }
 
-  inferBasicActionPattern(classType, range) {
-    if (range >= 2) return "RANGED_STATIC";
-    if (classType === "ASSASSIN") return "ASSASSIN_BACK";
-    return "MELEE_FRONT";
-  }
+  inferBasicActionPattern(classType, range) { return _inferBasicActionPattern(classType, range); }
 
   describeBasicAttack(classType, range) {
-    const pattern = this.inferBasicActionPattern(classType, range);
-    const lines = [
-      `Thi triß╗ân: ${this.translateActionPattern(pattern)}`,
-      `Tß║ºm ─æ├ính: ${range >= 2 ? "─É├ính xa" : "Cß║¡n chiß║┐n"}`,
-      "Loß║íi s├ít th╞░╞íng: Vß║¡t l├╜"
-    ];
-    if (classType === "ASSASSIN") {
-      lines.push("╞»u ti├¬n mß╗Ñc ti├¬u c├╣ng h├áng, sau ─æ├│ chß╗ìn cß╗Öt xa nhß║Ñt.");
-    } else if (classType === "ARCHER" || classType === "MAGE") {
-      lines.push("╞»u ti├¬n mß╗Ñc ti├¬u c├╣ng h├áng, sau ─æ├│ gß║ºn tiß╗ün tuyß║┐n.");
-    } else {
-      lines.push("╞»u ti├¬n tiß╗ün tuyß║┐n gß║ºn nhß║Ñt.");
-    }
-    lines.push("C├┤ng thß╗⌐c c╞í bß║ún: ATK v├á gi├íp mß╗Ñc ti├¬u.");
-    return lines;
+    return _describeBasicAttack(classType, range);
   }
 
-  stripSkillStarNotes(description) {
-    const raw = String(description ?? "").trim();
-    if (!raw) return "";
-    return raw.replace(/\s*Mß╗æc sao:[\s\S]*$/i, "").trim();
-  }
+  stripSkillStarNotes(description) { return _stripSkillStarNotes(description); }
 
-  getStarStatMultiplier(star) {
-    if (star >= 3) return 2.5;
-    if (star === 2) return 1.6;
-    return 1;
-  }
+  getStarStatMultiplier(star) { return _getStarStatMultiplier(star); }
 
-  getStarSkillMultiplier(star) {
-    if (star >= 3) return 1.4;
-    if (star === 2) return 1.2;
-    return 1;
-  }
+  getStarSkillMultiplier(star) { return _getStarSkillMultiplier(star); }
 
   getSkillTargetCountText(skill, star) {
-    if (!skill) return "kh├┤ng r├╡";
-    const effect = String(skill.effect ?? "");
-    const targetBonus = starTargetBonus(star);
-    const maxHits = Number.isFinite(skill.maxHits) ? Math.max(1, Math.floor(skill.maxHits)) : null;
-    const maxTargets = Number.isFinite(skill.maxTargets) ? Math.max(1, Math.floor(skill.maxTargets)) : null;
-
-    if (effect === "random_multi") {
-      const baseHits = getWaspMaxTargets({ star }, skill) ?? maxHits ?? 3;
-      const count = skill.id === "wasp_triple_strike" ? baseHits : baseHits + targetBonus;
-      return `${count} mß╗Ñc ti├¬u`;
-    }
-    if (effect === "row_multi") {
-      return `${maxHits ?? 3} mß╗Ñc ti├¬u c├╣ng h├áng`;
-    }
-    if (effect === "team_rage") {
-      return `${maxTargets ?? 3} ─æß╗ông minh`;
-    }
-    if (effect === "single_sleep") {
-      const sleepTargets = Math.min(3, Math.max(1, star));
-      return `1 mß╗Ñc ti├¬u ch├¡nh + ru ngß╗º tß╗æi ─æa ${sleepTargets} mß╗Ñc ti├¬u`;
-    }
-
-    const map = {
-      damage_shield_taunt: "1 mß╗Ñc ti├¬u",
-      damage_stun: "1 mß╗Ñc ti├¬u",
-      damage_shield_reflect: "1 mß╗Ñc ti├¬u",
-      single_burst: "1 mß╗Ñc ti├¬u",
-      double_hit: "1 mß╗Ñc ti├¬u",
-      single_burst_lifesteal: "1 mß╗Ñc ti├¬u",
-      single_delayed_echo: "1 mß╗Ñc ti├¬u",
-      single_sleep: "1 mß╗Ñc ti├¬u ch├¡nh",
-      single_armor_break: "1 mß╗Ñc ti├¬u",
-      single_bleed: "1 mß╗Ñc ti├¬u",
-      true_single: "1 mß╗Ñc ti├¬u",
-      cross_5: "tß╗æi ─æa 5 ├┤",
-      column_freeze: "tß╗æi ─æa 5 ├┤",
-      column_bleed: "tß╗æi ─æa 5 ├┤",
-      row_cleave: "tß╗æi ─æa 5 ├┤",
-      aoe_circle: "tß╗æi ─æa 9 ├┤",
-      aoe_poison: "tß╗æi ─æa 9 ├┤",
-      column_plus_splash: "1 cß╗Öt ch├¡nh + 2 cß╗Öt cß║ính",
-      ally_row_def_buff: "tß╗æi ─æa 5 ─æß╗ông minh",
-      column_bless: "tß╗æi ─æa 5 ─æß╗ông minh",
-      dual_heal: "2 ─æß╗ông minh",
-      shield_cleanse: "1 ─æß╗ông minh",
-      global_tide_evade: "to├án bß╗Ö ─æß╗ông minh",
-      global_knockback: "to├án bß╗Ö kß║╗ ─æß╗ïch",
-      global_poison_team: "to├án bß╗Ö kß║╗ ─æß╗ïch",
-      global_stun: "to├án bß╗Ö kß║╗ ─æß╗ïch",
-      multi_disarm: "3 kß║╗ ─æß╗ïch",
-      random_lightning: "5 lß║ºn gi├íng ngß║½u nhi├¬n",
-      metamorphosis: "bß║ún th├ón",
-      turtle_protection: "bß║ún th├ón",
-      rhino_counter: "bß║ún th├ón",
-      pangolin_reflect: "bß║ún th├ón",
-      self_atk_and_assist: "1 mß╗Ñc ti├¬u ch├¡nh (+─æ├ính phß╗Ñ trß╗ú nß║┐u c├│)",
-      team_def_buff: "to├án bß╗Ö ─æß╗ông minh"
-    };
-    return map[effect] ?? "theo t├¼nh huß╗æng";
+    return _getSkillTargetCountText(skill, star);
   }
 
   getSkillShapeText(skill) {
-    if (!skill) return "kh├┤ng r├╡";
-    const effect = String(skill.effect ?? "");
-    const map = {
-      damage_shield_taunt: "1 ├┤ ─æiß╗âm tiß╗ün tuyß║┐n",
-      damage_stun: "1 ├┤ ─æiß╗âm",
-      damage_shield_reflect: "1 ├┤ ─æiß╗âm",
-      single_burst: "1 ├┤ ─æiß╗âm",
-      double_hit: "1 ├┤ ─æiß╗âm (2 nh├ít)",
-      single_burst_lifesteal: "1 ├┤ ─æiß╗âm",
-      single_delayed_echo: "1 ├┤ ─æiß╗âm + dß╗Öi lß║íi c├╣ng ├┤",
-      single_sleep: "1 ├┤ ─æiß╗âm",
-      single_armor_break: "1 ├┤ ─æiß╗âm",
-      single_bleed: "1 ├┤ ─æiß╗âm",
-      true_single: "1 ├┤ ─æiß╗âm",
-      cross_5: "h├¼nh chß╗» thß║¡p 5 ├┤",
-      row_multi: "h├áng ngang",
-      row_cleave: "h├áng ngang",
-      column_freeze: "cß╗Öt dß╗ìc",
-      column_bleed: "cß╗Öt dß╗ìc",
-      column_plus_splash: "cß╗Öt dß╗ìc + 2 cß╗Öt kß║┐ b├¬n",
-      aoe_circle: "v├╣ng vu├┤ng 3x3",
-      aoe_poison: "v├╣ng vu├┤ng 3x3",
-      random_multi: "rß║úi ngß║½u nhi├¬n tr├¬n b├án ─æß╗ïch",
-      ally_row_def_buff: "h├áng ngang ─æß╗ông minh",
-      column_bless: "cß╗Öt dß╗ìc ─æß╗ông minh",
-      dual_heal: "2 ├┤ ─æß╗ông minh thß║Ñp m├íu",
-      shield_cleanse: "1 ├┤ ─æß╗ông minh thß║Ñp m├íu",
-      team_rage: "nh├│m ─æß╗ông minh gß║ºn bß║ún th├ón",
-      global_tide_evade: "to├án bß╗Ö b├án ─æß╗ông minh",
-      global_knockback: "to├án bß╗Ö b├án ─æß╗ïch",
-      global_poison_team: "to├án bß╗Ö b├án ─æß╗ïch",
-      global_stun: "to├án bß╗Ö b├án ─æß╗ïch",
-      multi_disarm: "3 mß╗Ñc ti├¬u ─æß╗ïch c├│ c├┤ng cao nhß║Ñt",
-      random_lightning: "5 ─æiß╗âm ngß║½u nhi├¬n ph├¡a ─æß╗ïch",
-      metamorphosis: "tß╗▒ th├ón",
-      turtle_protection: "tß╗▒ th├ón",
-      rhino_counter: "tß╗▒ th├ón",
-      pangolin_reflect: "tß╗▒ th├ón",
-      self_atk_and_assist: "─æiß╗âm tiß╗ün tuyß║┐n + ─æß╗ông minh c├╣ng h├áng hß╗ù trß╗ú",
-      cone_smash: "quß║ít 3 ├┤ ph├¡a tr╞░ß╗¢c",
-      team_def_buff: "to├án bß╗Ö b├án ─æß╗ông minh"
-    };
-    return map[effect] ?? "mß║½u kß╗╣ n─âng ─æß║╖c th├╣";
+    return _getSkillShapeText(skill);
   }
 
   getSkillDamageAndFormulaText(skill, baseStats, star) {
-    const starSkillMult = this.getStarSkillMultiplier(star);
-    const damageType = this.translateDamageType(skill?.damageType || "physical");
-    const statFromKey = (key) => Math.round((Number(baseStats?.[key] ?? 0) || 0) * this.getStarStatMultiplier(star));
-
-    if (skill?.hit1 && skill?.hit2) {
-      const statKey = skill.scaleStat || "atk";
-      const statLabel = this.translateScaleStat(statKey);
-      const statValue = statFromKey(statKey);
-      const h1Base = Number(skill.hit1.base ?? 0);
-      const h1Scale = Number(skill.hit1.scale ?? 0);
-      const h2Base = Number(skill.hit2.base ?? 0);
-      const h2Scale = Number(skill.hit2.scale ?? 0);
-      const h1 = Math.round((h1Base + statValue * h1Scale) * starSkillMult);
-      const h2 = Math.round((h2Base + statValue * h2Scale) * starSkillMult);
-      const total = Math.max(0, h1 + h2);
-      const formula = `C├┤ng thß╗⌐c: [(${statLabel}(${statValue}) x ${h1Scale} + ${h1Base}) + (${statLabel}(${statValue}) x ${h2Scale} + ${h2Base})] x${starSkillMult.toFixed(2)} = ${total}`;
-      return { damageText: `${total} (${damageType})`, formulaText: formula };
-    }
-
-    const baseVal = Number(skill?.base);
-    const scaleVal = Number(skill?.scale);
-    if (!Number.isFinite(baseVal) || !Number.isFinite(scaleVal)) {
-      return {
-        damageText: "kh├┤ng g├óy s├ít th╞░╞íng trß╗▒c tiß║┐p",
-        formulaText: "C├┤ng thß╗⌐c: Kh├┤ng c├│ c├┤ng thß╗⌐c s├ít th╞░╞íng trß╗▒c tiß║┐p."
-      };
-    }
-
-    const statKey = skill.scaleStat || "atk";
-    const statLabel = this.translateScaleStat(statKey);
-    const statValue = statFromKey(statKey);
-    const total = Math.max(0, Math.round((baseVal + statValue * scaleVal) * starSkillMult));
-    const formula = `C├┤ng thß╗⌐c: (${statLabel}(${statValue}) x ${scaleVal} + ${baseVal}) x${starSkillMult.toFixed(2)} = ${total}`;
-    return { damageText: `${total} (${damageType})`, formulaText: formula };
+    return _getSkillDamageAndFormulaText(skill, baseStats, star);
   }
 
   buildSkillStarMilestoneLines(skill, baseUnit) {
-    if (!skill) return [];
-    const baseStats = baseUnit?.stats ?? null;
-    const lines = [];
-    for (let star = 1; star <= 3; star += 1) {
-      const targetText = this.getSkillTargetCountText(skill, star);
-      const shapeText = this.getSkillShapeText(skill);
-      const { damageText, formulaText } = this.getSkillDamageAndFormulaText(skill, baseStats, star);
-      lines.push(
-        `${star} sao: S├ít th╞░╞íng: ${damageText} | Sß╗æ mß╗Ñc ti├¬u: ${targetText} | H├¼nh dß║íng chi├¬u thß╗⌐c: ${shapeText} | ${formulaText}`
-      );
-    }
-    return lines;
+    return _buildSkillStarMilestoneLines(skill, baseUnit);
   }
 
   describeSkillLines(skill, baseUnit = null) {
-    if (!skill) return ["Kh├┤ng c├│ kß╗╣ n─âng chß╗º ─æß╗Öng."];
-    const lines = [];
-    const description = this.stripSkillStarNotes(skill.descriptionVi || skill.description);
-    if (description) lines.push(description);
-    lines.push("Mß╗æc sao:");
-    lines.push(...this.buildSkillStarMilestoneLines(skill, baseUnit));
-    return lines;
+    return _describeSkillLines(skill, baseUnit);
   }
 
-  describeSkill(skill) {
-    return this.describeSkillLines(skill).join(" | ");
-  }
+  describeSkill(skill) { return _describeSkill(skill); }
 
-  describeSkillArea(skill) {
-    if (!skill) return "";
-    const maxHits = Number.isFinite(skill.maxHits) ? Math.max(1, Math.floor(skill.maxHits)) : null;
-    const maxTargets = Number.isFinite(skill.maxTargets) ? Math.max(1, Math.floor(skill.maxTargets)) : null;
-    const map = {
-      damage_shield_taunt: "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm tiß╗ün tuyß║┐n.",
-      damage_stun: "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm tiß╗ün tuyß║┐n.",
-      damage_shield_reflect: "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm tiß╗ün tuyß║┐n.",
-      ally_row_def_buff: "Kh├┤ng tß║Ñn c├┤ng. C╞░ß╗¥ng h├│a 1 h├áng ─æß╗ông minh (tß╗æi ─æa 5 ├┤).",
-      single_burst: "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm.",
-      double_hit: "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm (2 ─æ├▓n li├¬n tiß║┐p).",
-      single_burst_lifesteal: "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm v├á h├║t m├íu.",
-      single_delayed_echo: "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm, sau ─æ├│ nß╗ò dß╗Öi c├╣ng ├┤.",
-      cross_5: "Tß║Ñn c├┤ng 5 ├┤ h├¼nh chß╗» thß║¡p.",
-      row_multi: `Tß║Ñn c├┤ng ${maxHits ?? 3} ├┤ h├¼nh h├áng ngang.`,
-      single_sleep: "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm, c├│ thß╗â g├óy ngß╗º.",
-      single_armor_break: "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm v├á giß║úm gi├íp.",
-      column_freeze: "Tß║Ñn c├┤ng 5 ├┤ h├¼nh cß╗Öt dß╗ìc.",
-      aoe_circle: "Tß║Ñn c├┤ng v├╣ng vu├┤ng 3x3 quanh mß╗Ñc ti├¬u.",
-      column_plus_splash: "Tß║Ñn c├┤ng 5 ├┤ h├¼nh cß╗Öt v├á lan 2 ├┤ cß║ính mß╗Ñc ti├¬u.",
-      column_bleed: "Tß║Ñn c├┤ng to├án bß╗Ö cß╗Öt mß╗Ñc ti├¬u v├á g├óy chß║úy m├íu.",
-      aoe_poison: "Tß║Ñn c├┤ng v├╣ng 3x3 (tß╗æi ─æa 9 ├┤).",
-      dual_heal: "Kh├┤ng tß║Ñn c├┤ng. Hß╗ôi m├íu 2 ├┤ ─æß╗ông minh.",
-      shield_cleanse: "Kh├┤ng tß║Ñn c├┤ng. Tß║ío khi├¬n + thanh tß║⌐y cho ─æß╗ông minh.",
-      team_rage: `Kh├┤ng tß║Ñn c├┤ng. T─âng nß╗Ö tß╗æi ─æa ${maxTargets ?? 3} ─æß╗ông minh.`,
-      column_bless: "Kh├┤ng tß║Ñn c├┤ng. C╞░ß╗¥ng h├│a 1 cß╗Öt ─æß╗ông minh (tß╗æi ─æa 5 ├┤).",
-      global_tide_evade: "Kh├┤ng tß║Ñn c├┤ng. Hß╗ôi ─æß║ºy m├íu cho to├án bß╗Ö ─æß╗ông minh.",
-      global_knockback: "G├óy s├ít th╞░╞íng l├¬n to├án bß╗Ö ─æß╗ïch v├á ─æß║⌐y l├╣i h├áng tiß╗ün tuyß║┐n 1 ├┤.",
-      team_def_buff: "Kh├┤ng tß║Ñn c├┤ng. T─âng gi├íp/kh├íng ph├⌐p to├án ─æß╗Öi v├á hß╗ôi m├íu mß╗Ñc ti├¬u thß║Ñp m├íu nhß║Ñt.",
-      row_cleave: "Tß║Ñn c├┤ng 5 ├┤ h├¼nh h├áng ngang.",
-      self_atk_and_assist: "Tß║Ñn c├┤ng 1 ├┤ tiß╗ün tuyß║┐n, ─æß╗ông thß╗¥i tß╗▒ c╞░ß╗¥ng h├│a.",
-      cone_smash: "Tß║Ñn c├┤ng v├╣ng quß║ít 3 ├┤ vu├┤ng tr╞░ß╗¢c mß║╖t.",
-      true_single: "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm (s├ít th╞░╞íng chuß║⌐n)."
-      ,
-      single_poison_stack: "Tß║Ñn c├┤ng 1 ├┤ v├á cß╗Öng dß╗ôn ─æß╗Öc theo sß╗æ lß║ºn tr├║ng.",
-      lifesteal_disease_maxhp: "Tß║Ñn c├┤ng 1 ├┤, h├║t m├íu, t─âng HP tß╗æi ─æa v├á ph├ít t├ín dß╗ïch bß╗çnh.",
-      double_hit_gold_reward: "Tß║Ñn c├┤ng 1 ├┤ (2 ─æ├▓n); nß║┐u kß║┐t liß╗àu sß║╜ th╞░ß╗ƒng v├áng.",
-      assassin_execute_rage_refund: "Tß║Ñt s├ít 1 ├┤; khi kß║┐t liß╗àu sß║╜ ho├án nß╗Ö, th╞░ß╗ƒng v├áng v├á ─æ├ính nß╗æi ─æ├▓n."
-    };
-    const text = map[skill.effect];
-    if (text) return text;
-
-    if (skill.actionPattern === "SELF") return "Kh├┤ng tß║Ñn c├┤ng trß╗▒c tiß║┐p; hiß╗çu ß╗⌐ng tß╗▒ th├ón/hß╗ù trß╗ú.";
-    if (String(skill.effect ?? "").includes("single")) return "Tß║Ñn c├┤ng 1 ├┤ h├¼nh ─æiß╗âm.";
-    if (String(skill.effect ?? "").includes("row")) return "Tß║Ñn c├┤ng nhiß╗üu ├┤ h├¼nh h├áng ngang.";
-    if (String(skill.effect ?? "").includes("column")) return "Tß║Ñn c├┤ng nhiß╗üu ├┤ h├¼nh cß╗Öt dß╗ìc.";
-    if (String(skill.effect ?? "").includes("aoe")) return "Tß║Ñn c├┤ng nhiß╗üu ├┤ theo v├╣ng.";
-    if (String(skill.effect ?? "").includes("cone")) return "Tß║Ñn c├┤ng nhiß╗üu ├┤ v├╣ng quß║ít tr╞░ß╗¢c mß║╖t.";
-    return "Tß║Ñn c├┤ng theo mß║½u kß╗╣ n─âng ─æß║╖c th├╣.";
-  }
+  describeSkillArea(skill) { return _describeSkillArea(skill); }
 
-  translateDamageType(type) {
-    if (type === "physical") return "Vß║¡t l├╜";
-    if (type === "magic") return "Ph├⌐p";
-    if (type === "true") return "Chuß║⌐n";
-    return type ?? "-";
-  }
+  translateDamageType(type) { return _translateDamageType(type); }
 
-  translateScaleStat(stat) {
-    if (stat === "matk") return "MATK";
-    if (stat === "atk") return "ATK";
-    if (stat === "def") return "DEF";
-    if (stat === "mdef") return "MDEF";
-    return String(stat ?? "chß╗ë sß╗æ");
-  }
+  translateScaleStat(stat) { return _translateScaleStat(stat); }
 
   translateActionPattern(pattern) {
-    const map = {
-      MELEE_FRONT: "Cß║¡n chiß║┐n ├íp s├ít tiß╗ün tuyß║┐n",
-      ASSASSIN_BACK: "Lao ra hß║¡u ph╞░╞íng rß╗ôi quay vß╗ü",
-      RANGED_STATIC: "─Éß╗⌐ng y├¬n v├á bß║»n tß╗½ xa",
-      SELF: "Tß╗▒ c╞░ß╗¥ng h├│a hoß║╖c hß╗ù trß╗ú"
-    };
-    return map[pattern] ?? pattern;
+    return _translateActionPattern(pattern);
   }
 
-  translateSkillEffect(effect) {
-    const map = {
-      damage_shield_taunt: "G├óy s├ít th╞░╞íng + khi├¬n + khi├¬u kh├¡ch",
-      damage_stun: "G├óy s├ít th╞░╞íng + cho├íng",
-      damage_shield_reflect: "G├óy s├ít th╞░╞íng + khi├¬n phß║ún ─æ├▓n",
-      ally_row_def_buff: "T─âng gi├íp/kh├íng ph├⌐p theo h├áng",
-      single_burst: "Dß╗ôn s├ít th╞░╞íng ─æ╞ín mß╗Ñc ti├¬u",
-      double_hit: "─É├ính hai lß║ºn",
-      single_burst_lifesteal: "Dß╗ôn s├ít th╞░╞íng + h├║t m├íu",
-      single_delayed_echo: "S├ít th╞░╞íng + nß╗ò dß╗Öi",
-      cross_5: "S├ít th╞░╞íng h├¼nh chß╗» thß║¡p 5 ├┤",
-      row_multi: "Bß║»n xuy├¬n theo h├áng",
-      random_multi: "Bß║»n ngß║½u nhi├¬n nhiß╗üu mß╗Ñc ti├¬u",
-      single_sleep: "S├ít th╞░╞íng + g├óy ngß╗º",
-      single_armor_break: "S├ít th╞░╞íng + giß║úm gi├íp",
-      column_freeze: "Cß╗Öt b─âng + ─æ├│ng b─âng",
-      aoe_circle: "Nß╗ò v├╣ng vu├┤ng 3x3",
-      column_plus_splash: "─É├ính cß╗Öt + lan cß║ính",
-      aoe_poison: "─Éß╗Öc diß╗çn rß╗Öng",
-      dual_heal: "Hß╗ôi m├íu 2 ─æß╗ông minh",
-      shield_cleanse: "Tß║ío khi├¬n + thanh tß║⌐y",
-      team_rage: "T─âng nß╗Ö ─æß╗ông minh",
-      column_bless: "C╞░ß╗¥ng h├│a theo cß╗Öt",
-      global_tide_evade: "S├│ng thß║ºn hß╗ôi ─æß║ºy m├íu ─æß╗ông minh",
-      global_knockback: "S├│ng thß║ºn to├án bß║ún ─æß╗ô + ─æß║⌐y l├╣i tiß╗ün tuyß║┐n",
-      column_bleed: "X├⌐ cß╗Öt + chß║úy m├íu",
-      row_cleave: "Qu├⌐t h├áng",
-      self_atk_and_assist: "Tß╗▒ c╞░ß╗¥ng h├│a + ─æ├ính phß╗Ñ trß╗ú",
-      cone_smash: "Nß╗çn v├╣ng quß║ít 3 ├┤",
-      true_single: "S├ít th╞░╞íng chuß║⌐n ─æ╞ín mß╗Ñc ti├¬u",
-      team_def_buff: "T─âng gi├íp/kh├íng ph├⌐p to├án ─æß╗Öi + hß╗ôi m├íu thß║Ñp nhß║Ñt",
-      single_poison_stack: "─Éß╗Öc cß╗Öng dß╗ôn",
-      lifesteal_disease_maxhp: "H├║t m├íu + t─âng HP tß╗æi ─æa + dß╗ïch bß╗çnh",
-      double_hit_gold_reward: "Song k├¡ch th╞░ß╗ƒng v├áng",
-      assassin_execute_rage_refund: "Tß║Ñt s├ít ho├án nß╗Ö"
-    };
-    return map[effect] ?? effect;
-  }
+  translateSkillEffect(effect) { return _translateSkillEffect(effect); }
 
   translateAugmentEffect(effectType) {
     const map = {
@@ -5584,26 +5412,9 @@ export class PlanningScene extends Phaser.Scene {
     return map[effectType] ?? effectType;
   }
 
-  translateAugmentGroup(group) {
-    const map = {
-      ECONOMY: "Kinh tß║┐",
-      FORMATION: "─Éß╗Öi h├¼nh",
-      COMBAT: "Giao tranh",
-      SYNERGY: "Cß╗Öng h╞░ß╗ƒng"
-    };
-    return map[group] ?? group;
-  }
+  translateAugmentGroup(group) { return _translateAugmentGroup(group); }
 
-  getAugmentIcon(augment) {
-    if (augment?.icon) return augment.icon;
-    const map = {
-      ECONOMY: "≡ƒÆ░",
-      FORMATION: "≡ƒº⌐",
-      COMBAT: "ΓÜö∩╕Å",
-      SYNERGY: "Γ£¿"
-    };
-    return map[augment?.group] ?? "≡ƒî▓";
-  }
+  getAugmentIcon(augment) { return _getAugmentIcon(augment); }
 
   getAI() {
     return getAISettings(this.aiMode);
